{"version":3,"file":"index.js","sources":["../../src/client/composables/useGoogleAnalytics.ts"],"sourcesContent":["import type { GoogleAnalyticsPluginOptions } from '../../shared/index.js'\n\ndeclare global {\n  interface Window {\n    dataLayer?: unknown[]\n    gtag?: (...args: unknown[]) => void\n  }\n}\n\n/**\n * Initialize Google Analytics 4 tracking\n *\n * 初始化 Google Analytics 4 追踪\n *\n * @param options - Google Analytics plugin options\n *\n * @description Injects gtag.js and configures Google Analytics 4.\n * Enhanced measurement automatically tracks page views and other events.\n * The global `gtag()` function will be available for custom event tracking.\n *\n * 注入 gtag.js 并配置 Google Analytics 4。\n * 增强测量功能会自动追踪页面浏览和其他事件。\n * 全局 `gtag()` 函数可用于自定义事件追踪。\n *\n * @see https://developers.google.com/analytics/devguides/collection/gtagjs\n * @see https://developers.google.com/analytics/devguides/collection/ga4/events\n * @see https://support.google.com/analytics/answer/9216061\n */\nexport const useGoogleAnalytics = (\n  options: GoogleAnalyticsPluginOptions,\n): void => {\n  if (__VUEPRESS_SSR__) return\n\n  // avoid duplicated import\n  if (window.dataLayer && window.gtag) return\n\n  // insert gtag `<script>` tag\n  const gtagScript = document.createElement('script')\n  gtagScript.src = `https://www.googletagmanager.com/gtag/js?id=${options.id}`\n  gtagScript.async = true\n  document.head.appendChild(gtagScript)\n\n  // insert gtag snippet\n  window.dataLayer = window.dataLayer ?? []\n  // the gtag function must use `arguments` object to forward parameters\n  window.gtag = function gtag() {\n    // eslint-disable-next-line prefer-rest-params\n    window.dataLayer!.push(arguments)\n  }\n\n  window.gtag('js', new Date())\n\n  if (options.debug) {\n    window.gtag('config', options.id, { debug_mode: true })\n  } else {\n    window.gtag('config', options.id)\n  }\n}\n"],"names":["useGoogleAnalytics","options","gtagScript"],"mappings":"AA4BO,MAAMA,EACXC,GACS,CAIT,GAHI,kBAGA,OAAO,WAAa,OAAO,KAAM,OAGrC,MAAMC,EAAa,SAAS,cAAc,QAAQ,EAClDA,EAAW,IAAM,+CAA+CD,EAAQ,EAAE,GAC1EC,EAAW,MAAQ,GACnB,SAAS,KAAK,YAAYA,CAAU,EAGpC,OAAO,UAAY,OAAO,WAAa,CAAA,EAEvC,OAAO,KAAO,UAAgB,CAE5B,OAAO,UAAW,KAAK,SAAS,CAClC,EAEA,OAAO,KAAK,KAAM,IAAI,IAAM,EAExBD,EAAQ,MACV,OAAO,KAAK,SAAUA,EAAQ,GAAI,CAAE,WAAY,EAAK,CAAC,EAEtD,OAAO,KAAK,SAAUA,EAAQ,EAAE,CAEpC"}