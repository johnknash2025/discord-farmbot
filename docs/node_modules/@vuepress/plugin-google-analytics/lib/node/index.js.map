{"version":3,"file":"index.js","sources":["../../src/node/googleAnalyticsPlugin.ts"],"sourcesContent":["import type { Plugin, PluginObject } from 'vuepress/core'\nimport { getDirname, logger, path } from 'vuepress/utils'\nimport type { GoogleAnalyticsPluginOptions } from '../shared/index.js'\n\nconst __dirname = import.meta.dirname || getDirname(import.meta.url)\n\n/**\n * Google Analytics plugin for VuePress\n *\n * VuePress 的 Google Analytics 插件\n *\n * @param options - Plugin options\n * @returns VuePress plugin\n *\n * @description Integrates Google Analytics 4 tracking into VuePress applications.\n * Only active in production builds unless debug mode is enabled.\n *\n * 集成 Google Analytics 4 追踪到 VuePress 应用中。\n * 仅在生产构建时启用，除非开启调试模式。\n *\n * @example\n * ```ts\n * import { googleAnalyticsPlugin } from '@vuepress/plugin-google-analytics'\n *\n * export default {\n *   plugins: [\n *     googleAnalyticsPlugin({\n *       id: 'G-XXXXXXXXXX'\n *     })\n *   ]\n * }\n * ```\n */\nexport const googleAnalyticsPlugin =\n  (options: GoogleAnalyticsPluginOptions): Plugin =>\n  (app) => {\n    const plugin: PluginObject = {\n      name: '@vuepress/plugin-google-analytics',\n    }\n\n    if (!options.id) {\n      logger.warn(`[${plugin.name}] 'id' is required`)\n      return plugin\n    }\n\n    // returns an empty plugin in dev mode when debug mode is not enabled\n    if (app.env.isDev && !options.debug) {\n      return plugin\n    }\n\n    return {\n      ...plugin,\n\n      clientConfigFile: path.resolve(__dirname, '../client/config.js'),\n\n      define: {\n        __GA_OPTIONS__: options,\n      },\n    }\n  }\n"],"names":["__dirname","getDirname","googleAnalyticsPlugin","options","app","plugin","path","logger"],"mappings":"kEAIA,MAAMA,EAAY,YAAY,SAAWC,EAAW,YAAY,GAAG,EA6BtDC,EACVC,GACAC,GAAQ,CACP,MAAMC,EAAuB,CAC3B,KAAM,mCACR,EAEA,OAAKF,EAAQ,GAMTC,EAAI,IAAI,OAAS,CAACD,EAAQ,MACrBE,EAGF,CACL,GAAGA,EAEH,iBAAkBC,EAAK,QAAQN,EAAW,qBAAqB,EAE/D,OAAQ,CACN,eAAgBG,CAClB,CACF,GAjBEI,EAAO,KAAK,IAAIF,EAAO,IAAI,oBAAoB,EACxCA,EAiBX"}